import{l as s,_ as a}from"./helpers.35739ffe.js";import{s as i}from"./select2.7201c0e6.js";import"./app.ffd9927a.js";import"./tslib.es6.598c7c7a.js";i();s(window.YAFFA.language);const r="#category_source",o="#category_target";$(r).select2({placeholder:()=>a("Select category to be merged"),theme:"bootstrap-5",allowClear:!0,selectOnClose:!1,ajax:{url:"/api/assets/category",dataType:"json",delay:150,data:function(e){return{_token:csrfToken,q:e.term,withInactive:!0}},processResults:function(e){let t=$(o).select2("data");if(t.length>0){const n=Number(t[0].id);e=e.filter(function(c){return c.id!==n})}return{results:e}},cache:!0}}).on("select2:select",function(e){$.ajax({url:"/api/assets/category/"+e.params.data.id,data:{_token:csrfToken}}).done(t=>{$(r).data("parent",!t.parent)})}).on("select2:unselect",function(){$(r).data("parent",null)});let l=window.categorySource||null;l.id&&$(r).append(new Option(l.full_name,l.id,!0,!0)).trigger({type:"select2:select",params:{data:l}}).trigger("change");$(o).select2({placeholder:()=>a("Select category to be merged into"),theme:"bootstrap-5",allowClear:!0,selectOnClose:!1,ajax:{url:"/api/assets/category",dataType:"json",delay:150,data:function(e){return{_token:csrfToken,q:e.term,withInactive:!0}},processResults:function(e){let t=$(r).select2("data");if(t.length>0){const n=Number(t[0].id);e=e.filter(function(c){return c.id!==n})}return{results:e}},cache:!0}}).on("select2:select",function(e){$.ajax({url:"/api/assets/category/"+e.params.data.id,data:{_token:csrfToken}}).done(t=>{$(o).data("parent",!t.parent)})}).on("select2:unselect",function(){$(o).data("parent",null)});$("#merge-categories-form").on("submit",function(e){let t=$(r).select2("data"),n=$(o).select2("data");if(t.length===0||n.length===0){e.preventDefault(),alert(a("Please select categories to be merged"));return}if(t[0].id===n[0].id){e.preventDefault(),alert(a("Please select different categories to be merged"));return}if(typeof $("input[name=action]:checked").val()>"u"){e.preventDefault(),alert(a("Please select an action"));return}if($(r).data("parent")===!0&&$(o).data("parent")===!1){e.preventDefault(),alert(a("You cannot merge a parent category into a child category."));return}confirm(a("Are you sure you want to merge these categories?"))||e.preventDefault()});document.getElementById("cancel").addEventListener("click",function(){confirm(a("Are you sure you want to discard any changes?"))&&window.history.back()});
