import{_ as Y,a as l,g as k,o as d,r as b,b as e,t as r,f,d as i,v as y,l as h,e as V,w as D,K as F,F as g,h as w,G as _,B as T,M as P,c as E}from"./app-KLFPBacJ.js";import{s as M,_ as S}from"./helpers-C8PqwG3r.js";import{g as C,B as $}from"./Button-Cr3kI2Fa.js";import{D as A}from"./index-qaPES-kX.js";import"./tslib.es6-CZM0TROl.js";const B={props:{form:{type:Object,required:!0},field:{type:String,required:!0}}},L={name:"HasError",extends:B},q=["innerHTML"];function H(s,o,t,a,n,c){return s.form.errors.has(s.field)?(d(),l("div",{key:0,class:"invalid-feedback d-block",innerHTML:s.form.errors.get(s.field)},null,8,q)):k("",!0)}const m=Y(L,[["render",H]]),N={name:"ChangePassword",components:{Button:$,HasError:m},data:()=>({form:new C({current_password:"",password:"",password_confirmation:""}),sandbox_mode:window.sandbox_mode}),methods:{onSubmit(){let s=this;this.form.busy=!0,this.form.patch(window.route("user.change_password"),this.form).then(function(){s.showToast(__("Success"),__("Password changed successfully."),"bg-success"),s.form.reset(),s.form.successful=!0}).catch(function(o){o.response.status===422?s.showToast(__("Error"),__("Validation failed. Please check the form for errors."),"bg-danger"):(console.error(o),s.showToast(__("Error"),__("An error occurred. Please try again later."),"bg-danger"))}).finally(function(){s.form.busy=!1})},__:function(s,o){return S(s,o)},showToast:function(s,o,t,a){return M(s,o,t,a)}}},j={class:"card",id:"changePasswordForm"},K={class:"card-header"},O={class:"card-title"},G={key:0,class:"card-body"},W={class:"row mb-3"},z={for:"current_password",class:"col-form-label col-sm-3"},I={class:"col-sm-9"},J=["placeholder"],Q={class:"row mb-3"},R={for:"password",class:"col-form-label col-sm-3"},X={class:"col-sm-9"},Z=["placeholder"],x={class:"row mb-3"},oo={for:"password_confirmation",class:"col-form-label col-sm-3"},eo={class:"col-sm-9"},so=["placeholder"],to={key:1,class:"card-body"},ao={class:"alert alert-warning"},ro={key:2,class:"card-footer"};function no(s,o,t,a,n,c){const p=b("HasError"),v=b("Button");return d(),l("div",j,[e("form",{"accept-charset":"UTF-8",onSubmit:o[3]||(o[3]=D((...u)=>c.onSubmit&&c.onSubmit(...u),["prevent"])),onKeydown:o[4]||(o[4]=u=>s.form.onKeydown(u)),autocomplete:"off"},[e("div",K,[e("div",O,r(c.__("Change Password")),1)]),s.sandbox_mode?(d(),l("div",to,[e("div",ao,r(c.__("You are in sandbox mode. You cannot change your password.")),1)])):(d(),l("div",G,[e("div",W,[e("label",z,r(c.__("Current Password")),1),e("div",I,[f(e("input",{type:"password",class:"form-control",id:"current_password",name:"current_password",placeholder:c.__("Current Password"),"onUpdate:modelValue":o[0]||(o[0]=u=>s.form.current_password=u),required:""},null,8,J),[[y,s.form.current_password]]),i(p,{form:s.form,field:"current_password"},null,8,["form"])])]),e("div",Q,[e("label",R,r(c.__("New Password")),1),e("div",X,[f(e("input",{type:"password",class:"form-control",id:"password",name:"password",placeholder:c.__("New Password"),"onUpdate:modelValue":o[1]||(o[1]=u=>s.form.password=u),required:""},null,8,Z),[[y,s.form.password]]),i(p,{form:s.form,field:"password"},null,8,["form"])])]),e("div",x,[e("label",oo,r(c.__("Confirm password")),1),e("div",eo,[f(e("input",{type:"password",class:"form-control",id:"password_confirmation",name:"password_confirmation",placeholder:c.__("Confirm new password"),"onUpdate:modelValue":o[2]||(o[2]=u=>s.form.password_confirmation=u),required:""},null,8,so),[[y,s.form.password_confirmation]]),i(p,{form:s.form,field:"password_confirmation"},null,8,["form"])])])])),s.sandbox_mode?k("",!0):(d(),l("div",ro,[i(v,{class:"btn btn-primary",form:s.form,dusk:"button-change-password"},{default:h(()=>[V(r(c.__("Change Password")),1)]),_:1},8,["form"])]))],32)])}const lo=Y(N,[["render",no]]),io={class:"card",id:"userSettingsForm"},co={class:"card-header"},uo={class:"card-title"},_o={class:"card-body"},mo={class:"row mb-3"},fo={for:"language",class:"col-form-label col-sm-3"},po={class:"col-sm-9"},go={class:"input-group"},wo=["value"],ho=["title"],bo={class:"row mb-3"},vo={for:"locale",class:"col-form-label col-sm-3"},yo={class:"col-sm-9"},Fo={class:"input-group"},Ao=["value"],Yo=["title"],$o={class:"row mb-3"},To={for:"start_date",class:"col-form-label col-sm-3"},Po={class:"col-sm-9"},ko={class:"input-group"},Vo=["value"],Do=["title"],Mo={class:"row mb-3"},So={for:"end_date",class:"col-form-label col-sm-3"},Co={class:"col-sm-9"},Uo={class:"input-group"},Eo=["value"],Bo=["title"],Lo={class:"row mb-3"},qo={for:"account_details_date_range",class:"col-form-label col-sm-3"},Ho={class:"col-sm-9"},No={class:"input-group"},jo={value:"none"},Ko=["label"],Oo=["value"],Go=["title"],Wo={class:"card-footer"},zo={name:"UserSettings",components:{DatePicker:A,Button:$,HasError:m},data:()=>({form:new C({language:window.YAFFA.language,locale:window.YAFFA.locale,end_date:window.YAFFA.end_date,start_date:window.YAFFA.start_date,account_details_date_range:window.YAFFA.account_details_date_range||"none"})}),mounted(){[...document.querySelectorAll('[data-coreui-toggle="tooltip"]')].map(o=>new coreui.Tooltip(o))},methods:{onSubmit:function(){let s=this;this.form.busy=!0,this.form.patch(window.route("user.settings.update"),this.form).then(o=>{o.status===200&&(window.YAFFA.language=o.data.data.language,window.YAFFA.locale=o.data.data.locale,window.YAFFA.start_date=o.data.data.start_date,window.YAFFA.end_date=o.data.data.end_date,window.YAFFA.account_details_date_range=o.data.data.account_details_date_range,s.showToast(__("Success"),__("User settings updated"),"bg-success"),o.data.warnings.forEach(t=>{s.showToast(__("Warning"),t,"bg-warning")}))}).catch(o=>{o.response.status===422?s.showToast(__("Error"),__("Validation failed. Please check the form for errors."),"bg-danger"):(console.error(o),s.showToast(__("Error"),__("An error occurred. Please try again later."),"bg-danger"))}).finally(()=>{s.form.busy=!1})},__:function(s,o){return S(s,o)},showToast:function(s,o,t,a){return M(s,o,t,a)}}},Io=Object.assign(zo,{props:{languages:{type:Object,default:window.languages},locales:{type:Object,default:window.locales},datePresets:{type:Object,default:window.datePresets}},setup(s){return(o,t)=>(d(),l("div",io,[e("form",{"accept-charset":"UTF-8",onSubmit:t[5]||(t[5]=D((...a)=>o.onSubmit&&o.onSubmit(...a),["prevent"])),onKeydown:t[6]||(t[6]=a=>o.form.onKeydown(a)),autocomplete:"off"},[e("div",co,[e("div",uo,r(o.__("Update user settings")),1)]),e("div",_o,[e("div",mo,[e("label",fo,r(o.__("Language")),1),e("div",po,[e("div",go,[f(e("select",{class:"form-select",id:"language",name:"language","onUpdate:modelValue":t[0]||(t[0]=a=>o.form.language=a)},[(d(!0),l(g,null,w(s.languages,(a,n)=>(d(),l("option",{key:n,value:n},r(a),9,wo))),128))],512),[[F,o.form.language]]),e("span",{class:"input-group-text btn btn-info","data-coreui-toggle":"tooltip","data-coreui-placement":"top",title:o.__("Controls the language used in YAFFA.")},[...t[7]||(t[7]=[e("i",{class:"fa fa-info-circle"},null,-1)])],8,ho)]),i(_(m),{field:"language",form:o.form},null,8,["form"])])]),e("div",bo,[e("label",vo,r(o.__("Locale")),1),e("div",yo,[e("div",Fo,[f(e("select",{class:"form-select",id:"locale",name:"locale","onUpdate:modelValue":t[1]||(t[1]=a=>o.form.locale=a)},[(d(!0),l(g,null,w(s.locales,(a,n)=>(d(),l("option",{key:n,value:n},r(a),9,Ao))),128))],512),[[F,o.form.locale]]),e("span",{class:"input-group-text btn btn-info","data-coreui-toggle":"tooltip","data-coreui-placement":"top",title:o.__("Controls how numbers, dates, currencies are formatted.")},[...t[8]||(t[8]=[e("i",{class:"fa fa-info-circle"},null,-1)])],8,Yo)]),i(_(m),{field:"locale",form:o.form},null,8,["form"])])]),e("div",$o,[e("label",To,r(o.__("Start date for YAFFA")),1),e("div",Po,[e("div",ko,[i(_(A),{"is-required":!0,masks:{L:"YYYY-MM-DD",modelValue:"YYYY-MM-DD"},mode:"date",popover:{visibility:"click",showDelay:0,hideDelay:0},modelValue:o.form.start_date,"onUpdate:modelValue":t[2]||(t[2]=a=>o.form.start_date=a),modelModifiers:{string:!0}},{default:h(({inputValue:a,inputEvents:n})=>[e("input",T({class:"form-control",id:"start_date",value:a},P(n,!0)),null,16,Vo)]),_:1},8,["modelValue"]),e("span",{class:"input-group-text btn btn-info","data-coreui-toggle":"tooltip","data-coreui-placement":"top",title:o.__("The earliest date YAFFA uses to retrieve currency exchange rates and investment prices. You can record transactions to earlier dates, if needed.")},[...t[9]||(t[9]=[e("i",{class:"fa fa-info-circle"},null,-1)])],8,Do)]),i(_(m),{field:"start_date",form:o.form},null,8,["form"])])]),e("div",Mo,[e("label",So,r(o.__("End date for YAFFA")),1),e("div",Co,[e("div",Uo,[i(_(A),{"is-required":!0,masks:{L:"YYYY-MM-DD",modelValue:"YYYY-MM-DD"},mode:"date",popover:{visibility:"click",showDelay:0,hideDelay:0},modelValue:o.form.end_date,"onUpdate:modelValue":t[3]||(t[3]=a=>o.form.end_date=a),modelModifiers:{string:!0}},{default:h(({inputValue:a,inputEvents:n})=>[e("input",T({class:"form-control",id:"end_date",value:a},P(n,!0)),null,16,Eo)]),_:1},8,["modelValue"]),e("span",{class:"input-group-text btn btn-info","data-coreui-toggle":"tooltip","data-coreui-placement":"top",title:o.__("How long would you like YAFFA to calculate forecasts.")},[...t[10]||(t[10]=[e("i",{class:"fa fa-info-circle"},null,-1)])],8,Bo)]),i(_(m),{field:"end_date",form:o.form},null,8,["form"])])]),e("div",Lo,[e("label",qo,r(o.__("Default date range for account details")),1),e("div",Ho,[e("div",No,[f(e("select",{class:"form-select",id:"account_details_date_range",name:"account_details_date_range","onUpdate:modelValue":t[4]||(t[4]=a=>o.form.account_details_date_range=a)},[e("option",jo,r(o.__("Don't load data by default")),1),(d(!0),l(g,null,w(s.datePresets,a=>(d(),l("optgroup",{label:a.label},[(d(!0),l(g,null,w(a.options,n=>(d(),l("option",{value:n.value},r(n.label),9,Oo))),256))],8,Ko))),256))],512),[[F,o.form.account_details_date_range]]),e("span",{class:"input-group-text btn btn-info","data-coreui-toggle":"tooltip","data-coreui-placement":"top",title:o.__("The default date range to load transactions from when opening account details. This can be changed on the fly in the account details view.")},[...t[11]||(t[11]=[e("i",{class:"fa fa-info-circle"},null,-1)])],8,Go)]),i(_(m),{field:"account_details_date_range",form:o.form},null,8,["form"])])])]),e("div",Wo,[i(_($),{class:"btn btn-primary",form:o.form,dusk:"button-update-settings"},{default:h(()=>[V(r(o.__("Save")),1)]),_:1},8,["form"])])],32)]))}}),Jo={name:"MyProfile",components:{"change-password":lo,"user-settings":Io}},Qo={class:"row"},Ro={class:"col-md-6"},Xo={class:"col-md-6"};function Zo(s,o,t,a,n,c){const p=b("change-password"),v=b("user-settings");return d(),l("div",Qo,[e("div",Ro,[i(p)]),e("div",Xo,[i(v)])])}const xo=Y(Jo,[["render",Zo]]),U=E({});U.component("my-profile",xo);U.mount("#app");
