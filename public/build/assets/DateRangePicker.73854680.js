import{u as h,r as g,D,f as O}from"./Datepicker.86824658.js";function f(a){const t=Object.assign({},a);return delete t.inputs,delete t.allowOneSidedRange,delete t.maxNumberOfDates,t}function k(a,t,s,e){g(a,[[s,"changeDate",t]]),new D(s,e,a)}function u(a,t){if(a._updating)return;a._updating=!0;const s=t.target;if(s.datepicker===void 0)return;const e=a.datepickers,[r,d]=e,i={render:!1},n=a.inputs.indexOf(s),l=n===0?1:0,c=e[n].dates[0],o=e[l].dates[0];c!==void 0&&o!==void 0?n===0&&c>o?(r.setDate(o,i),d.setDate(c,i)):n===1&&c<o&&(r.setDate(c,i),d.setDate(o,i)):a.allowOneSidedRange||(c!==void 0||o!==void 0)&&(i.clear=!0,e[l].setDate(e[n].dates,i)),e.forEach(p=>{p.picker.update().render()}),delete a._updating}class S{constructor(t,s={}){let e=Array.isArray(s.inputs)?s.inputs:Array.from(t.querySelectorAll("input"));if(e.length<2)return;t.rangepicker=this,this.element=t,this.inputs=e=e.slice(0,2),Object.freeze(e),this.allowOneSidedRange=!!s.allowOneSidedRange;const r=u.bind(null,this),d=f(s),i=this.datepickers=[];e.forEach(n=>{k(this,r,n,d)}),Object.freeze(i),Object.defineProperty(this,"dates",{get(){return i.map(n=>n.dates[0])}}),i[0].dates.length>0?u(this,{target:e[0]}):i[1].dates.length>0&&u(this,{target:e[1]})}setOptions(t){this.allowOneSidedRange=!!t.allowOneSidedRange;const s=f(t);this.datepickers.forEach(e=>{e.setOptions(s)})}destroy(){this.datepickers.forEach(t=>{t.destroy()}),h(this),delete this.element.rangepicker}getDates(t=void 0){const s=t?e=>O(e,t,this.datepickers[0].config.locale):e=>new Date(e);return this.dates.map(e=>e===void 0?e:s(e))}setDates(t,s){const{datepickers:[e,r],inputs:[d,i],dates:[n,l]}=this;this._updating=!0,e.setDate(t),r.setDate(s),delete this._updating,r.dates[0]!==l?u(this,{target:i}):e.dates[0]!==n&&u(this,{target:d})}}export{S as D};
