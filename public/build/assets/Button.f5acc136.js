import{C as O,a as A,o as d,b as f,e as E,l as S}from"./app.1ea3d35e.js";var w=Object.defineProperty,v=Object.prototype.hasOwnProperty,p=Object.getOwnPropertySymbols,k=Object.prototype.propertyIsEnumerable,y=(s,e,t)=>e in s?w(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,n=(s,e)=>{for(var t in e||(e={}))v.call(e,t)&&y(s,t,e[t]);if(p)for(var t of p(e))k.call(e,t)&&y(s,t,e[t]);return s};const l=s=>s===void 0,b=s=>Array.isArray(s),m=s=>s&&typeof s.size=="number"&&typeof s.type=="string"&&typeof s.slice=="function",u=(s,e,t,o)=>((e=e||{}).indices=!l(e.indices)&&e.indices,e.nullsAsUndefineds=!l(e.nullsAsUndefineds)&&e.nullsAsUndefineds,e.booleansAsIntegers=!l(e.booleansAsIntegers)&&e.booleansAsIntegers,e.allowEmptyArrays=!l(e.allowEmptyArrays)&&e.allowEmptyArrays,t=t||new FormData,l(s)||(s===null?e.nullsAsUndefineds||t.append(o,""):(r=>typeof r=="boolean")(s)?e.booleansAsIntegers?t.append(o,s?1:0):t.append(o,s):b(s)?s.length?s.forEach((r,i)=>{const c=o+"["+(e.indices?i:"")+"]";u(r,e,t,c)}):e.allowEmptyArrays&&t.append(o+"[]",""):(r=>r instanceof Date)(s)?t.append(o,s.toISOString()):!(r=>r===Object(r))(s)||(r=>m(r)&&typeof r.name=="string"&&(typeof r.lastModifiedDate=="object"||typeof r.lastModified=="number"))(s)||m(s)?t.append(o,s):Object.keys(s).forEach(r=>{const i=s[r];if(b(i))for(;r.length>2&&r.lastIndexOf("[]")===r.length-2;)r=r.substring(0,r.length-2);u(i,e,t,o?o+"["+r+"]":r)})),t);var P={serialize:u};function h(s){if(s===null||typeof s!="object")return s;const e=Array.isArray(s)?[]:{};return Object.keys(s).forEach(t=>{e[t]=h(s[t])}),e}function g(s){return Array.isArray(s)?s:[s]}function j(s){return s instanceof File||s instanceof Blob||s instanceof FileList||typeof s=="object"&&s!==null&&Object.values(s).find(e=>j(e))!==void 0}class I{constructor(){this.errors={},this.errors={}}set(e,t){typeof e=="object"?this.errors=e:this.set(n(n({},this.errors),{[e]:g(t)}))}all(){return this.errors}has(e){return Object.prototype.hasOwnProperty.call(this.errors,e)}hasAny(...e){return e.some(t=>this.has(t))}any(){return Object.keys(this.errors).length>0}get(e){if(this.has(e))return this.getAll(e)[0]}getAll(e){return g(this.errors[e]||[])}only(...e){const t=[];return e.forEach(o=>{const r=this.get(o);r&&t.push(r)}),t}flatten(){return Object.values(this.errors).reduce((e,t)=>e.concat(t),[])}clear(e){const t={};e&&Object.keys(this.errors).forEach(o=>{o!==e&&(t[o]=this.errors[o])}),this.set(t)}}class a{constructor(e={}){this.originalData={},this.busy=!1,this.successful=!1,this.recentlySuccessful=!1,this.recentlySuccessfulTimeoutId=void 0,this.errors=new I,this.progress=void 0,this.update(e)}static make(e){return new this(e)}update(e){this.originalData=Object.assign({},this.originalData,h(e)),Object.assign(this,e)}fill(e={}){this.keys().forEach(t=>{this[t]=e[t]})}data(){return this.keys().reduce((e,t)=>n(n({},e),{[t]:this[t]}),{})}keys(){return Object.keys(this).filter(e=>!a.ignore.includes(e))}startProcessing(){this.errors.clear(),this.busy=!0,this.successful=!1,this.progress=void 0,this.recentlySuccessful=!1,clearTimeout(this.recentlySuccessfulTimeoutId)}finishProcessing(){this.busy=!1,this.successful=!0,this.progress=void 0,this.recentlySuccessful=!0,this.recentlySuccessfulTimeoutId=setTimeout(()=>{this.recentlySuccessful=!1},a.recentlySuccessfulTimeout)}clear(){this.errors.clear(),this.successful=!1,this.recentlySuccessful=!1,this.progress=void 0,clearTimeout(this.recentlySuccessfulTimeoutId)}reset(){Object.keys(this).filter(e=>!a.ignore.includes(e)).forEach(e=>{this[e]=h(this.originalData[e])})}get(e,t={}){return this.submit("get",e,t)}post(e,t={}){return this.submit("post",e,t)}patch(e,t={}){return this.submit("patch",e,t)}put(e,t={}){return this.submit("put",e,t)}delete(e,t={}){return this.submit("delete",e,t)}submit(e,t,o={}){return this.startProcessing(),o=n({data:{},params:{},url:this.route(t),method:e,onUploadProgress:this.handleUploadProgress.bind(this)},o),e.toLowerCase()==="get"?o.params=n(n({},this.data()),o.params):(o.data=n(n({},this.data()),o.data),j(o.data)&&!o.transformRequest&&(o.transformRequest=[r=>P.serialize(r)])),new Promise((r,i)=>{(a.axios||O).request(o).then(c=>{this.finishProcessing(),r(c)}).catch(c=>{this.handleErrors(c),i(c)})})}handleErrors(e){this.busy=!1,this.progress=void 0,e.response&&this.errors.set(this.extractErrors(e.response))}extractErrors(e){return e.data&&typeof e.data=="object"?e.data.errors?n({},e.data.errors):e.data.message?{error:e.data.message}:n({},e.data):{error:a.errorMessage}}handleUploadProgress(e){this.progress={total:e.total,loaded:e.loaded,percentage:Math.round(100*e.loaded/e.total)}}route(e,t={}){let o=e;return Object.prototype.hasOwnProperty.call(a.routes,e)&&(o=decodeURI(a.routes[e])),typeof t!="object"&&(t={id:t}),Object.keys(t).forEach(r=>{o=o.replace(`{${r}}`,t[r])}),o}onKeydown(e){const t=e.target;t.name&&this.errors.clear(t.name)}}a.routes={},a.errorMessage="Something went wrong. Please try again.",a.recentlySuccessfulTimeout=2e3,a.ignore=["busy","successful","errors","progress","originalData","recentlySuccessful","recentlySuccessfulTimeoutId"];const T={name:"Button",props:{form:{type:Object,required:!0},spinner:{type:Boolean,default:!0}}},D=["disabled","aria-disabled"],U={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"};function B(s,e,t,o,r,i){return d(),f("button",{type:"submit",disabled:t.form.busy,"aria-disabled":t.form.busy},[t.form.busy&&t.spinner?(d(),f("span",U)):E("",!0),S(s.$slots,"default")],8,D)}const M=A(T,[["render",B]]);export{M as B,a as g};
